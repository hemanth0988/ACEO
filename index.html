<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;500;600&display=swap');

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        .main-content {
            flex: 1;
            padding: 20px;
            overflow: auto;
            transition: margin-left 0.3s;
            margin-left: 60px; /* Adjust based on sidebar default width */
        }
        h1 {
            text-align: left;
            color: #333;
            margin-left: 20px;
        }
    </style>
</head>
<body>
    <div id="sidebar"></div>

    <div class="main-content">
        <h1>Dashboard</h1>
        <!-- Dashboard content goes here -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const sidebarContainer = document.getElementById('sidebar');
            const xhr = new XMLHttpRequest();
            xhr.open('GET', 'sidebar.html', true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    sidebarContainer.innerHTML = xhr.responseText;

                    // Add the script from the sidebar.html content
                    const script = document.createElement('script');
                    script.innerHTML = `
                        function toggleSidebar() {
                            const sidebar = document.querySelector('.sidebar');
                            sidebar.classList.toggle('collapsed');
                            sidebar.classList.toggle('expanded');
                            const texts = document.querySelectorAll('.menu-text, .dropdown-arrow, .toggle-label');
                            if (sidebar.classList.contains('expanded')) {
                                texts.forEach(text => {
                                    text.style.opacity = '1';
                                });
                            } else {
                                texts.forEach(text => {
                                    text.style.opacity = '0';
                                });
                            }
                            adjustMainContentWidth();
                        }

                        function toggleDropdown(event) {
                            event.preventDefault();
                            const parent = event.target.closest('a');
                            const dropdownMenu = parent.nextElementSibling;
                            const dropdownArrow = parent.querySelector('.dropdown-arrow');
                            if (dropdownMenu && !document.querySelector('.sidebar').classList.contains('collapsed')) {
                                dropdownMenu.classList.toggle('show');
                                if (dropdownArrow) {
                                    dropdownArrow.classList.toggle('fa-chevron-down');
                                    dropdownArrow.classList.toggle('fa-chevron-up');
                                }
                            }
                        }

                        function adjustMainContentWidth() {
                            const sidebarWidth = document.querySelector('.sidebar').offsetWidth;
                            document.querySelector('.main-content').style.marginLeft = `${sidebarWidth}px`;
                        }

                        window.addEventListener('resize', adjustMainContentWidth);
                        document.addEventListener('DOMContentLoaded', adjustMainContentWidth);

                        const darkModeToggle = document.getElementById('dark-mode-toggle');
                        darkModeToggle.addEventListener('change', () => {
                            document.body.classList.toggle('dark-mode', darkModeToggle.checked);
                            document.body.classList.toggle('light-mode', !darkModeToggle.checked);
                        });
                    `;
                    document.body.appendChild(script);
                }
            };
            xhr.send();
        });
    </script>
</body>
</html>

